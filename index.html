<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pi Platba Test</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h2>Pi Platba Test</h2>
  <button id="login">ğŸ” PÅ™ihlÃ¡sit</button>
  <button id="pay">ğŸ’¸ Platit 1Ï€</button>

  <script>
    Pi.init({ version: "2.0" });

    document.getElementById("login").onclick = function () {
      Pi.authenticate(["payments"], (p) => {
        console.log("Nalezena neÃºplnÃ¡ platba", p);
      }).then((auth) => {
        alert("âœ… PÅ™ihlÃ¡Å¡en jako: " + auth.user.username);
      }).catch((err) => {
        alert("âŒ Chyba pÅ™ihlÃ¡Å¡enÃ­: " + err.message);
      });
    };

    document.getElementById("pay").onclick = function () {
      Pi.createPayment({
        amount: 1,
        memo: "Test platba pro Pi",
        metadata: { test: true }
      }, {
        onReadyForServerApproval(paymentId) {
          console.log("ğŸ’¡ Ready for approval:", paymentId);
        },
        onReadyForServerCompletion(paymentId, txid) {
          console.log("âœ… Hotovo:", paymentId, txid);
        },
        onCancel(paymentId) {
          alert("âŒ ZruÅ¡eno: " + paymentId);
        },
        onError(error) {
          alert("âŒ Error: " + error.message);
        }
      });
    };
  </script>
</body>
</html>
